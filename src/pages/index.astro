---
import { ITEMS_PER_PAGE } from '@/consts';
import SidebarLayout from "../layouts/SidebarLayout.astro";
import { getCollection } from "astro:content";
import BlogPostArticle from "@components/BlogPostArticle.astro";

const allPosts = await getCollection("posts");
const postYears = allPosts
	.map(p => p.data.postDate.getFullYear())
	.sort((x,y) => y - x)
	.filter((v, i, s) => s.indexOf(v) === i);

const pageTitle = "Home";
---

<SidebarLayout pageTitle={pageTitle}>
	<ul class="divide-y divide-gray-200 dark:divide-gray-700">
		{!allPosts.length && 'No posts found.'}
		{allPosts.slice(0, ITEMS_PER_PAGE).map((post) => <BlogPostArticle post={post}/>)}
		
	</ul>
</SidebarLayout>
